<%= javascript_include_tag 'mustpay_wxpubsdk' %>
<div class="gfc-box wechat-pay">
  <ul class="wechat-pay-box">
    <li>
      <span>商品名称</span>
      <p><%= @lottery_order.product.name %></p>
    </li>
    <li>
      <span>订单类型</span>
      <p>支付运费</p>
    </li>
    <li>
      <span>费用</span>
      <p><%= number_to_currency @lottery_order.product.postage %>元</p>
    </li>
    <button onclick="mustWechatPay()"><span>微信支付</span></button>
  </ul>
</div>

<script>

    function mustWechatPay(type) {
        MUSTPAY.init({
            'apps_id': "<%= @mustpay[:apps_id]%>", 	//MustPay系统分配的应用ID号
            'prepay_id': "<%= @mustpay[:prepay_id]%>", //商户通过统一下单接口获取的预支付ID
            'pay_type': 'wx_pay_pub' //支付通道简称
//            'open_status': 0
        });
    }


</script>

<style>
  p{
    color: #333;
  }
</style>